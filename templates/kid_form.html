{% extends "base.html" %}

{% block title %}{% if kid %}Edit Kid{% else %}Add Kid{% endif %} - Summer Camp Tool{% endblock %}

{% block content %}
<h1>{% if kid %}Edit Kid{% else %}Add Kid{% endif %}</h1>

<p style="color: #6c757d; margin-bottom: 30px;">
    {% if kid %}
    Update {{ kid.name }}'s information and school dates.
    {% else %}
    Add a child's information. School dates are used to calculate summer weeks automatically.
    {% endif %}
</p>

<form method="POST" action="{% if kid %}{{ url_for('family.kid_update', id=kid.id) }}{% else %}{{ url_for('family.kid_new') }}{% endif %}">
    <div class="form-group">
        <label for="name">Name *</label>
        <input type="text" id="name" name="name" value="{% if kid %}{{ kid.name }}{% endif %}" required>
    </div>

    <div class="form-group">
        <label for="birthday">Birthday *</label>
        <input type="date" id="birthday" name="birthday" value="{% if kid %}{{ kid.birthday }}{% endif %}" required>
        <small>Used to calculate age for camp eligibility</small>
    </div>

    <div class="form-group">
        <label for="grade">Grade (for next school year) *</label>
        <select id="grade" name="grade" required>
            <option value="">Select grade</option>
            {% for g in range(13) %}
            <option value="{{ g }}" {% if kid and kid.grade == g %}selected{% endif %}>
                {% if g == 0 %}Kindergarten{% else %}Grade {{ g }}{% endif %}
            </option>
            {% endfor %}
        </select>
        <small>Grade they'll be entering in the fall (after summer camp)</small>
    </div>

    <div style="background-color: #d1ecf1; border: 1px solid #bee5eb; padding: 15px; border-radius: 4px; margin: 30px 0;">
        <h3 style="margin-top: 0; color: #0c5460; font-size: 16px;">School Dates (Important!)</h3>
        <p style="color: #0c5460; margin: 10px 0 15px 0; font-size: 14px;">
            These dates determine the summer weeks available for camp. The app calculates the first week of summer
            as the Monday after the earliest "last day of school" across all your kids.
        </p>

        <div class="form-group">
            <label for="last_day_of_school">Last Day of School *</label>
            <input type="date" id="last_day_of_school" name="last_day_of_school"
                   value="{% if kid %}{{ kid.last_day_of_school }}{% endif %}" required>
            <small>Last day of school before summer break</small>
        </div>

        <div class="form-group">
            <label for="first_day_of_school">First Day of School (Fall) *</label>
            <input type="date" id="first_day_of_school" name="first_day_of_school"
                   value="{% if kid %}{{ kid.first_day_of_school }}{% endif %}" required>
            <small>First day of school in the fall (determines when summer ends)</small>
        </div>
    </div>

    <div class="form-group">
        <label for="friends">Friends</label>
        <textarea id="friends" name="friends" rows="3" placeholder="Enter friend names, separated by commas">{% if kid and kid.friends %}{{ kid.friends|join(', ') }}{% endif %}</textarea>
        <small>Track which friends your child knows (used for coordinating camp sessions)</small>
    </div>

    <div style="margin-top: 30px; display: flex; gap: 10px;">
        <button type="submit" class="btn btn-primary">
            {% if kid %}Update Kid{% else %}Add Kid{% endif %}
        </button>
        <a href="{{ url_for('family.kids_list') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
